| Deadline | Folder name | Branch name |
| ----------- | ------------- | ------------- |
| - | todos | todos |

# TODOs

## Описание задания

Необходимо создать SPA приложение по созданию списка задач

### Описание приложения:

- Приложение состоит из 4 страниц:
  - Главная, страница с формой создания задачи
  - Страница со списоком всех задач
  - Страница с детальным описанием задачи и кнопками редактирования
  - 404 страница, показывается при несуществующем роуте

- Одного модуля:
  - Датапикер

### Макет приложения:

![Screenshot](https://i.imgur.com/2RLlGfb.png)

### Демо приложения:
- https://rs-todos-app.herokuapp.com/

### Описание страниц приложения:

**1. Страница создания задачи**

- Страница состоит из одной `кнопки`* и `формы`** со следующими полями для ввода:
    - `Title` - текстовое поле, название задачи
    - `Tags` - поле для указание тегов(chips). При написании текста и нажатия на "Enter" либо при потере фокуса введенный текст отображается в виде блока с кнопкой внутри этого блока, при клике по которой блок удаляется. Блоки также можно удалять нажатием на клавишу "Backspace". Высота поля подстраивается под количество введенных тегов. Все теги должны быть с уникальным названием.
    - `Date` - при фокусе на этом поле должно показываться модальное окно датапикера
    - `Description` - описание задачи, поле должно иметь ограничение по количеству введенных символов и подстраиваться под размер введенного текста

**При нажатии на кнопку `CREATE TODO` происходит запись в `db` и перенаправление на страницу со списком задач*

***В форме должна присутствовать минимальная валидация, проверка только на пустые поля, дату можно вводить любую*
  
**2. Страница со списоком задач `/list`**

- Страница состоит из таблицы со следующими полями:
    - `#` - порядковый номер 
    - `Title` - Название задачи
    - `Date`: Дата дедлайна
    - `Description` - описание задачи, поле должно подстраиваться под ширину экрана, текст, который не поместился должен быть скрыт, переноса не должно быть
    - `Status` - отображает статус задачи, всего 3 статуса:
        - `Active` - задачи с не истекшим дедлайном и не отмечены как `Completed`
        - `Outdated` - задачи, у которых просрочен дедлайн и они не были отмечены как `Completed`
        - `Completed` - задачи, которым присвоили статус завершенной
    - `Open` - содержит кнопку, при клике по которой происходи переход на страницу с детальным описанием этой задачи

- Фильтра:
    - В фильтре должно присутствовать 4 значения: `Active`, `Outdated`, `Completed` и `All`, при выборе которого должны отображаться задачи с указанным статусом, либо все задачи

- Блок с цифрами(пагинация):
    - При нажатии на цифры происходит смена данных в таблицы в соответствии с указанной цифрой(номером страницы), происходит смена `url` адреса в адресной строке (без перезагрузки)
    - Количество отображаемых задач в таблице на Ваше усмотрение

**3. Страница с описанием задачи**

- Страница состоит из таблицы и двух кнопок:
    - В таблице можно редактировать только дату (нельзя указать прошедшую) и описание, название задачи и теги недоступны для редактирования
    - Кнопка `COMPLETE TODO` завершает задачу, обновляя соответствующее поле у задачи в `db` и выводится соответствующая надпись, поля для ввода становятся только для чтения, кнопки редактирования и завершения становятся недоступны
    - Кнопка `UPDATE` обновляет задачу, вносит обновления в `db` и выводит соответствующую надпись
    - Если у задачи статус `Outdated` или `Completed` поля формы не редактируемы, кнопки неактивны 

**4. Страница 404**

- Страница отображается, если пользователь ввел несуществующий `url` адрес
- Дизайн и оформление на ваше усмотрение

**4. Модуль датапикер**
  - Модульное окно с возможностью выбора даты и 2 кнопками "ОК" и "ОТМЕНА"
  
## Технические требования

- При переходе по ссылкам не должно происходить перезагрузки страницы (исключение переход по ссылкам с 404 странцы)
- URL страницы с описанием задачи должен иметь вид: `/task-M7OtFFF_GsHag0CtgTZ` или `/#task-M7OtFFF_GsHag0CtgTZ` (вам нужно будет хранить уникальные id каждой задачи)
- Страница `/list` со списоком задач, должна иметь вид: `/list?filter=all&page=1` или `/#list?filter=all&page=1` query параметры (строка после ?) принимает параметры фильтра, где указано значение фильтра и номер страницы, которую нужно отобразить
- При перезагрузке страницы, либо при указании точного адреса задачи, либо точного фильтра списка задач, должна показываться соответствующая задача либо список задач, соответствующий фильтру
- При не валидном `URL` адресе, отсутствующем `id` задачи, либо фильтр задач имеет недопустимые параметры, должна выводиться 404 страница
- Приложение корректно работает в последней версии Chrome
- Можно использовать любые фреймворки `bootstrap`, `materialize` и т.д.

## Критерии оценки:

### Максимальная оценка за задание: 190 баллов

**Дизайн и верстка**
- Минимальная ширина страницы, при которой она отображается корректно – 320 рх. +10
- Присутствую все блоки/страницы, отсутствует горизонтальный скролл на всех страницах. +10

**Страница создание задачи**
- В поле формы с тегами можно добавлять/удалять теги. +10
- Поле с тегами изменяет высоту подстраиваясь под количество введенных тегов. +10
- Поле `textarea` принимает размер ввденного текста и имеет ограничение на количество символов. +10
- При вводе данных в textarea показывается количество введенных символов. +10
- При фокусе на поле Date показывается модальное окно для выбора даты. +10
- При отправке формы происходит запись в `db` и перенаправление на страницу со списком задач (без перезагрузки) +10

**Страница со списком задач**
- Присутствует фильтр, при изменении значений отображаются задачи с соответствующим статусом без перезагрузки. +10
- Присутствует пагинация. +10
- В таблице присутствую кнопки со ссылкой на задачу. +10
- Отображаются корректные статусы задач. +10

**Страница описание задачи**
- При нажатии на кнопку `UPDATE` происходит обновление задачи в `db` и выводится сообщение. +10
- Кнопка `COMPLETED` завершает задачу, присваивает ей соответствующий статус с записью в `db` и выводит сообщение. +10
- Задачи со статусами `Completed` и `Outdated` недоступны для редактирования, кнопки не активны. +10

**Технические**
- При не валидном `url` адресе показывается 404 страница. +10
- При переходе по ссылкам не происходит перезагрузки (кроме случаев перехода с 404 страницы). +10
- В качестве `db` используется `firebase`. +10
- Выполнен дополнительный функционал. +10
  
  
### Cross-check  

- Инструкция по проведению `cross-check`: [https://docs.rs.school/#/cross-check-flow](https://docs.rs.school/#/cross-check-flow)

### Цель задания

**Приобрести/улучшить знания:**

- Взаимодействие с `BOM`, работа со свойствами объекта `window`: `location, history` их методами и событиями.
- Знакомство и взаимодействие с `db`, сервисом firebase, отправка `POST`, `PATCH`, `PUT`, `DELETE` запросов
- Взаимодействие с нестандартными данными в формах
- Подключение модулей (datepicker)
- Написание `SPA` приложений использую `#` или `HTML5 history API`
- Работа с датой


### Материалы к заданию

**1. Сервис `firebase`**

[https://firebase.google.com/](https://firebase.google.com/)

- Регистрируемся на сервисе
- Нажимаем `Get started`
- Добавляем новый проект `Add project`
- Придумываем название для проекта
- По желанию оставляем включенной сбор статистики, нажимаем `Continue`
- Если в предыдущем шаге был оставлен вариант по умолчанию со сбором статистики, то выбираем аккаунт для сбора статистики и нажимаем `create project`. Это займет некоторое время.
- После создания проекта и для начала взаимодействия с базой данных ее нужно создать. В меню слева кликаем по ссылке меню `Database`
- Вы попадете на страницу для создания базы данных, рекомендую создать упрощенную версию, `Realtime Database` которая будет чуть ниже, кликаем по кнопке `Create database`

  ![Screenshot](https://i.imgur.com/3upHZB4.png)

- В следующем шаге выбираете пункт `Start in test mode` (для возможности читать и делать запись в db любому пользователю, эти настройки можно позже изменить)

  ![Screenshot](https://i.imgur.com/EwvK0mH.png)
  
- Всё, ваша база данных создана, для начала взаимодействия в `db` нужно прочитать следующую инструкцию: [https://firebase.google.com/docs/reference/rest/database?authuser=0](https://firebase.google.com/docs/reference/rest/database?authuser=0)

- Пример использования, где `[collection-name]` - имя коллекции, после нее должна идти `.json`, это будет означать, что мы пересылаем данные в формате `json`, не забудьте сформировать соответствующий заголовок, пример `url` для `POST` запроса `https://my_project_id.firebaseio.com/todos.json`
 пример кода запроса:

  ```javascript
  const body = {
    title: 'New Task',
    date: "2020-10-03T00:00:00.000Z"  
  };
  
  const setData = async () => {
    const response = await fetch(`https://[PROJECT_ID].firebaseio.com/[collection-name].json`, {
      method: 'POST',
      body: JSON.stringify(body),
      headers: {
        'Content-Type': 'application/json'
      }
    });
    const result = await response.json();
  }
  ```
  
- Самостоятельно также рекомендуется ознакомится с разделом `Authentication`, по желанию можно сделать как дополнительный функционал

**2. `Faker` - npm пакет для генерации моковых данных**

- Ссылка на пакет: [https://www.npmjs.com/package/faker](https://www.npmjs.com/package/faker)
- Этим инструментом можно создать множество разнообразных объектов с читабельными данными, пример использования:

  ```javascript
  
  import Faker from 'faker';
  
  const fakeData = {
    title: Fake.lorem.word(),
    date: Fake.date.future(),
    description: Faker.lorem.paragraph()
  }
  ```
  
- Можно запустить в цикле и наполнить `db`
- Не забудьте удалить импорт из файла, т.к. размер выходного бандла будет больше 2mb

**3. Некоторые материалы по созданию `SPA` используя `hash` и `HTML5 history API`:**

- Краткое вводное видео, поможет понять основной принцип SPA: [https://youtu.be/sAjAUmtGylY](https://youtu.be/sAjAUmtGylY)
- Если Вы будете использовать `HTML5 history API` для своего приложения, то что бы при перезагрузке страницы у вас работало приложение, Вам нужно будет сконфигурировать сервер и разместить его на специальном хостинге, таком как [https://heroku.com/](https://heroku.com/)
- Краткое видео, как задеплоить Node.js на heroku [https://youtu.be/wG7hX8Np1Pg](https://youtu.be/wG7hX8Np1Pg)
- Пример конфигурирования `Node.js` сервера на отдачу `index.html` при любом адресе `url`: 
  
  ```javascript
    const express = require('express');
    const path = require('path');
    
    const app = express();
    const PORT = 5000;
    
    app.use(express.static('public'));
    
    app.get('*', function (req, res) {
      res.sendFile(path.join(__dirname, 'public/index.html'));
    });
    
    app.listen(PORT, console.log(`Node.js web server at port ${PORT} is running...`));
  ```
  
**4. CSS framework `materialize`**
  - [https://materializecss.com/](https://materializecss.com/)